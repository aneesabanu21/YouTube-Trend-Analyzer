<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube Trend Analyzer</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23FF0000'%3E%3Cpath d='M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z'/%3E%3C/svg%3E">
</head>
<body>
    <header>
        <div class="header-content">
            <svg class="youtube-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor">
                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
            </svg>
            <h1>YouTube Trend Analyzer</h1>
        </div>
        <p class="subtitle">Discover what's trending across different regions</p>
    </header>

    <main class="main-content">
        <!-- Flash messages -->
        {% with messages = get_flashed_messages(with_categories=true) %}
            {% if messages %}
                <div class="flash-messages">
                    {% for category, message in messages %}
                        <div class="flash-message flash-{{ category }}">
                            <span class="flash-text">{{ message }}</span>
                            <button class="flash-close" onclick="this.parentElement.style.display='none'">&times;</button>
                        </div>
                    {% endfor %}
                </div>
            {% endif %}
        {% endwith %}

        <div class="form-container">
            <h2>Select a Region to Analyze</h2>
            <p class="form-description">Choose a country to see what videos are currently trending in that region.</p>
            
            <form action="/fetch" method="post" class="region-form">
                <div class="form-group">
                    <label for="region">Choose a region:</label>
                    <select id="region" name="region" required onchange="updateLanguages()">
                        <option value="">-- Select a Region --</option>
                        <!-- North America -->
                        <option value="US">ğŸ‡ºğŸ‡¸ United States</option>
                        <option value="CA">ğŸ‡¨ğŸ‡¦ Canada</option>
                        <option value="MX">ğŸ‡²ğŸ‡½ Mexico</option>
                        
                        <!-- South America -->
                        <option value="BR">ğŸ‡§ğŸ‡· Brazil</option>
                        <option value="AR">ğŸ‡¦ğŸ‡· Argentina</option>
                        <option value="CL">ğŸ‡¨ğŸ‡± Chile</option>
                        <option value="CO">ğŸ‡¨ğŸ‡´ Colombia</option>
                        <option value="PE">ğŸ‡µğŸ‡ª Peru</option>
                        
                        <!-- Europe -->
                        <option value="GB">ğŸ‡¬ğŸ‡§ United Kingdom</option>
                        <option value="DE">ğŸ‡©ğŸ‡ª Germany</option>
                        <option value="FR">ğŸ‡«ğŸ‡· France</option>
                        <option value="IT">ğŸ‡®ğŸ‡¹ Italy</option>
                        <option value="ES">ğŸ‡ªğŸ‡¸ Spain</option>
                        <option value="NL">ğŸ‡³ğŸ‡± Netherlands</option>
                        <option value="BE">ğŸ‡§ğŸ‡ª Belgium</option>
                        <option value="CH">ğŸ‡¨ğŸ‡­ Switzerland</option>
                        <option value="AT">ğŸ‡¦ğŸ‡¹ Austria</option>
                        <option value="SE">ğŸ‡¸ğŸ‡ª Sweden</option>
                        <option value="NO">ğŸ‡³ğŸ‡´ Norway</option>
                        <option value="DK">ğŸ‡©ğŸ‡° Denmark</option>
                        <option value="FI">ğŸ‡«ğŸ‡® Finland</option>
                        <option value="PL">ğŸ‡µğŸ‡± Poland</option>
                        <option value="CZ">ğŸ‡¨ğŸ‡¿ Czech Republic</option>
                        <option value="HU">ğŸ‡­ğŸ‡º Hungary</option>
                        <option value="PT">ğŸ‡µğŸ‡¹ Portugal</option>
                        <option value="GR">ğŸ‡¬ğŸ‡· Greece</option>
                        <option value="IE">ğŸ‡®ğŸ‡ª Ireland</option>
                        <option value="RU">ğŸ‡·ğŸ‡º Russia</option>
                        <option value="UA">ğŸ‡ºğŸ‡¦ Ukraine</option>
                        <option value="TR">ğŸ‡¹ğŸ‡· Turkey</option>
                        
                        <!-- Asia -->
                        <option value="IN">ğŸ‡®ğŸ‡³ India</option>
                        <option value="JP">ğŸ‡¯ğŸ‡µ Japan</option>
                        <option value="KR">ğŸ‡°ğŸ‡· South Korea</option>
                        <option value="CN">ğŸ‡¨ğŸ‡³ China</option>
                        <option value="TH">ğŸ‡¹ğŸ‡­ Thailand</option>
                        <option value="VN">ğŸ‡»ğŸ‡³ Vietnam</option>
                        <option value="PH">ğŸ‡µğŸ‡­ Philippines</option>
                        <option value="ID">ğŸ‡®ğŸ‡© Indonesia</option>
                        <option value="MY">ğŸ‡²ğŸ‡¾ Malaysia</option>
                        <option value="SG">ğŸ‡¸ğŸ‡¬ Singapore</option>
                        <option value="TW">ğŸ‡¹ğŸ‡¼ Taiwan</option>
                        <option value="HK">ğŸ‡­ğŸ‡° Hong Kong</option>
                        <option value="PK">ğŸ‡µğŸ‡° Pakistan</option>
                        <option value="BD">ğŸ‡§ğŸ‡© Bangladesh</option>
                        <option value="LK">ğŸ‡±ğŸ‡° Sri Lanka</option>
                        <option value="AE">ğŸ‡¦ğŸ‡ª UAE</option>
                        <option value="SA">ğŸ‡¸ğŸ‡¦ Saudi Arabia</option>
                        <option value="IL">ğŸ‡®ğŸ‡± Israel</option>
                        
                        <!-- Africa -->
                        <option value="ZA">ğŸ‡¿ğŸ‡¦ South Africa</option>
                        <option value="NG">ğŸ‡³ğŸ‡¬ Nigeria</option>
                        <option value="KE">ğŸ‡°ğŸ‡ª Kenya</option>
                        <option value="EG">ğŸ‡ªğŸ‡¬ Egypt</option>
                        <option value="MA">ğŸ‡²ğŸ‡¦ Morocco</option>
                        <option value="TN">ğŸ‡¹ğŸ‡³ Tunisia</option>
                        <option value="GH">ğŸ‡¬ğŸ‡­ Ghana</option>
                        
                        <!-- Oceania -->
                        <option value="AU">ğŸ‡¦ğŸ‡º Australia</option>
                        <option value="NZ">ğŸ‡³ğŸ‡¿ New Zealand</option>
                    </select>
                </div>
                
                <div class="form-group" id="language-group" style="display: none;">
                    <label for="language">Choose language (optional):</label>
                    <select id="language" name="language">
                        <option value="">-- Default Language --</option>
                    </select>
                    <small class="form-hint">Leave blank to use the main language of the selected region</small>
                </div>
                
                <button type="submit" class="fetch-button">
                    <svg class="button-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 12c0 1.2-4.03 6-9 6s-9-4.8-9-6c0-1.2 4.03-6 9-6s9 4.8 9 6z"/>
                        <circle cx="12" cy="12" r="3"/>
                    </svg>
                    Analyze Trends
                </button>
            </form>
        </div>

        <div class="features">
            <h2>Features</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M3 3h18v18H3zM9 9h6v6H9z"/>
                    </svg>
                    <h3>Real-time Data</h3>
                    <p>Get the latest trending videos directly from YouTube's API</p>
                </div>
                <div class="feature-card">
                    <svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M18 20V10M12 20V4M6 20v-6"/>
                    </svg>
                    <h3>Interactive Charts</h3>
                    <p>Visualize trending data with beautiful, interactive charts</p>
                </div>
                <div class="feature-card">
                    <svg class="feature-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <circle cx="12" cy="12" r="10"/>
                        <path d="M2 12h20"/>
                        <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                    </svg>
                    <h3>Global Regions</h3>
                    <p>Explore trends from over 15 different countries worldwide</p>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <p>&copy; 2025 YouTube Trend Analyzer. Powered by YouTube Data API v3.</p>
    </footer>

    <script>
        // Language mapping for each region
        const regionLanguages = {
            // North America
            'US': [
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' },
                { code: 'es', name: 'ğŸ‡ªğŸ‡¸ Spanish' },
                { code: 'zh', name: 'ğŸ‡¨ğŸ‡³ Chinese' }
            ],
            'CA': [
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' },
                { code: 'fr', name: 'ğŸ‡«ğŸ‡· French' }
            ],
            'MX': [
                { code: 'es', name: 'ğŸ‡²ğŸ‡½ Spanish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            
            // South America
            'BR': [
                { code: 'pt', name: 'ğŸ‡§ğŸ‡· Portuguese' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'AR': [
                { code: 'es', name: 'ğŸ‡¦ğŸ‡· Spanish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'CL': [
                { code: 'es', name: 'ğŸ‡¨ğŸ‡± Spanish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'CO': [
                { code: 'es', name: 'ğŸ‡¨ğŸ‡´ Spanish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'PE': [
                { code: 'es', name: 'ğŸ‡µğŸ‡ª Spanish' },
                { code: 'qu', name: 'Quechua' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            
            // Europe
            'GB': [
                { code: 'en', name: 'ğŸ‡¬ğŸ‡§ English' },
                { code: 'cy', name: 'ğŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿ Welsh' }
            ],
            'DE': [
                { code: 'de', name: 'ğŸ‡©ğŸ‡ª German' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' },
                { code: 'tr', name: 'ğŸ‡¹ğŸ‡· Turkish' }
            ],
            'FR': [
                { code: 'fr', name: 'ğŸ‡«ğŸ‡· French' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'IT': [
                { code: 'it', name: 'ğŸ‡®ğŸ‡¹ Italian' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'ES': [
                { code: 'es', name: 'ğŸ‡ªğŸ‡¸ Spanish' },
                { code: 'ca', name: 'Catalan' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'NL': [
                { code: 'nl', name: 'ğŸ‡³ğŸ‡± Dutch' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'BE': [
                { code: 'nl', name: 'ğŸ‡³ğŸ‡± Dutch' },
                { code: 'fr', name: 'ğŸ‡«ğŸ‡· French' },
                { code: 'de', name: 'ğŸ‡©ğŸ‡ª German' }
            ],
            'CH': [
                { code: 'de', name: 'ğŸ‡©ğŸ‡ª German' },
                { code: 'fr', name: 'ğŸ‡«ğŸ‡· French' },
                { code: 'it', name: 'ğŸ‡®ğŸ‡¹ Italian' }
            ],
            'AT': [
                { code: 'de', name: 'ğŸ‡¦ğŸ‡¹ German' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'SE': [
                { code: 'sv', name: 'ğŸ‡¸ğŸ‡ª Swedish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'NO': [
                { code: 'no', name: 'ğŸ‡³ğŸ‡´ Norwegian' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'DK': [
                { code: 'da', name: 'ğŸ‡©ğŸ‡° Danish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'FI': [
                { code: 'fi', name: 'ğŸ‡«ğŸ‡® Finnish' },
                { code: 'sv', name: 'ğŸ‡¸ğŸ‡ª Swedish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'PL': [
                { code: 'pl', name: 'ğŸ‡µğŸ‡± Polish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'CZ': [
                { code: 'cs', name: 'ğŸ‡¨ğŸ‡¿ Czech' },
                { code: 'sk', name: 'ğŸ‡¸ğŸ‡° Slovak' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'HU': [
                { code: 'hu', name: 'ğŸ‡­ğŸ‡º Hungarian' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'PT': [
                { code: 'pt', name: 'ğŸ‡µğŸ‡¹ Portuguese' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'GR': [
                { code: 'el', name: 'ğŸ‡¬ğŸ‡· Greek' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'IE': [
                { code: 'en', name: 'ğŸ‡®ğŸ‡ª English' },
                { code: 'ga', name: 'ğŸ‡®ğŸ‡ª Irish' }
            ],
            'RU': [
                { code: 'ru', name: 'ğŸ‡·ğŸ‡º Russian' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'UA': [
                { code: 'uk', name: 'ğŸ‡ºğŸ‡¦ Ukrainian' },
                { code: 'ru', name: 'ğŸ‡·ğŸ‡º Russian' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'TR': [
                { code: 'tr', name: 'ğŸ‡¹ğŸ‡· Turkish' },
                { code: 'ku', name: 'Kurdish' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            
            // Asia
            'IN': [
                { code: 'hi', name: 'ğŸ‡®ğŸ‡³ Hindi' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' },
                { code: 'ta', name: 'ğŸ‡®ğŸ‡³ Tamil' },
                { code: 'te', name: 'ğŸ‡®ğŸ‡³ Telugu' },
                { code: 'bn', name: 'ğŸ‡§ğŸ‡© Bengali' },
                { code: 'mr', name: 'ğŸ‡®ğŸ‡³ Marathi' },
                { code: 'gu', name: 'ğŸ‡®ğŸ‡³ Gujarati' }
            ],
            'JP': [
                { code: 'ja', name: 'ğŸ‡¯ğŸ‡µ Japanese' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'KR': [
                { code: 'ko', name: 'ğŸ‡°ğŸ‡· Korean' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'CN': [
                { code: 'zh', name: 'ğŸ‡¨ğŸ‡³ Chinese' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'TH': [
                { code: 'th', name: 'ğŸ‡¹ğŸ‡­ Thai' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'VN': [
                { code: 'vi', name: 'ğŸ‡»ğŸ‡³ Vietnamese' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'PH': [
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' },
                { code: 'tl', name: 'ğŸ‡µğŸ‡­ Filipino' }
            ],
            'ID': [
                { code: 'id', name: 'ğŸ‡®ğŸ‡© Indonesian' },
                { code: 'jv', name: 'Javanese' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'MY': [
                { code: 'ms', name: 'ğŸ‡²ğŸ‡¾ Malay' },
                { code: 'zh', name: 'ğŸ‡¨ğŸ‡³ Chinese' },
                { code: 'ta', name: 'ğŸ‡®ğŸ‡³ Tamil' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'SG': [
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' },
                { code: 'zh', name: 'ğŸ‡¨ğŸ‡³ Chinese' },
                { code: 'ms', name: 'ğŸ‡²ğŸ‡¾ Malay' },
                { code: 'ta', name: 'ğŸ‡®ğŸ‡³ Tamil' }
            ],
            'TW': [
                { code: 'zh', name: 'ğŸ‡¹ğŸ‡¼ Chinese' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'HK': [
                { code: 'zh', name: 'ğŸ‡­ğŸ‡° Chinese' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'PK': [
                { code: 'ur', name: 'ğŸ‡µğŸ‡° Urdu' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' },
                { code: 'pa', name: 'Punjabi' }
            ],
            'BD': [
                { code: 'bn', name: 'ğŸ‡§ğŸ‡© Bengali' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'LK': [
                { code: 'si', name: 'ğŸ‡±ğŸ‡° Sinhala' },
                { code: 'ta', name: 'ğŸ‡®ğŸ‡³ Tamil' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'AE': [
                { code: 'ar', name: 'ğŸ‡¦ğŸ‡ª Arabic' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' },
                { code: 'hi', name: 'ğŸ‡®ğŸ‡³ Hindi' }
            ],
            'SA': [
                { code: 'ar', name: 'ğŸ‡¸ğŸ‡¦ Arabic' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'IL': [
                { code: 'he', name: 'ğŸ‡®ğŸ‡± Hebrew' },
                { code: 'ar', name: 'Arabic' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            
            // Africa
            'ZA': [
                { code: 'en', name: 'ğŸ‡¿ğŸ‡¦ English' },
                { code: 'af', name: 'Afrikaans' },
                { code: 'zu', name: 'Zulu' },
                { code: 'xh', name: 'Xhosa' }
            ],
            'NG': [
                { code: 'en', name: 'ğŸ‡³ğŸ‡¬ English' },
                { code: 'ha', name: 'Hausa' },
                { code: 'yo', name: 'Yoruba' },
                { code: 'ig', name: 'Igbo' }
            ],
            'KE': [
                { code: 'en', name: 'ğŸ‡°ğŸ‡ª English' },
                { code: 'sw', name: 'Swahili' }
            ],
            'EG': [
                { code: 'ar', name: 'ğŸ‡ªğŸ‡¬ Arabic' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'MA': [
                { code: 'ar', name: 'ğŸ‡²ğŸ‡¦ Arabic' },
                { code: 'fr', name: 'ğŸ‡«ğŸ‡· French' },
                { code: 'en', name: 'ğŸ‡ºğŸ‡¸ English' }
            ],
            'TN': [
                { code: 'ar', name: 'ğŸ‡¹ğŸ‡³ Arabic' },
                { code: 'fr', name: 'ğŸ‡«ğŸ‡· French' }
            ],
            'GH': [
                { code: 'en', name: 'ğŸ‡¬ğŸ‡­ English' },
                { code: 'ak', name: 'Akan' }
            ],
            
            // Oceania
            'AU': [
                { code: 'en', name: 'ğŸ‡¦ğŸ‡º English' },
                { code: 'zh', name: 'ğŸ‡¨ğŸ‡³ Chinese' }
            ],
            'NZ': [
                { code: 'en', name: 'ğŸ‡³ğŸ‡¿ English' },
                { code: 'mi', name: 'MÄori' }
            ]
        };

        function updateLanguages() {
            const regionSelect = document.getElementById('region');
            const languageGroup = document.getElementById('language-group');
            const languageSelect = document.getElementById('language');
            const selectedRegion = regionSelect.value;

            if (selectedRegion && regionLanguages[selectedRegion]) {
                // Show language selection
                languageGroup.style.display = 'block';
                
                // Clear existing options
                languageSelect.innerHTML = '<option value="">-- Default Language --</option>';
                
                // Add language options for selected region
                regionLanguages[selectedRegion].forEach(lang => {
                    const option = document.createElement('option');
                    option.value = lang.code;
                    option.textContent = lang.name;
                    languageSelect.appendChild(option);
                });
            } else {
                // Hide language selection
                languageGroup.style.display = 'none';
            }
        }

        // Add loading state to form submission
        document.querySelector('.region-form').addEventListener('submit', function(e) {
            const button = this.querySelector('.fetch-button');
            const originalText = button.innerHTML;
            
            button.innerHTML = '<svg class="button-icon spinner" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 11-6.219-8.56"/></svg>Loading...';
            button.disabled = true;
            
            // Re-enable button after 10 seconds in case of issues
            setTimeout(() => {
                button.innerHTML = originalText;
                button.disabled = false;
            }, 10000);
        });
    </script>
</body>
</html>
